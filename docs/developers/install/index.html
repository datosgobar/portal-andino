



<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentación de Portal Andino, la distribución de CKAN desarrollada por la República Argentina dockerizada, fácil de instalar y compatible con el Perfil Nacional de Metadatos de la Política de Apertura de Datos.">
      
      
        <link rel="canonical" href="https://datosgobar.github.io/portal-andino/developers/install/">
      
      
        <meta name="author" content="Datos Argentina">
      
      
        <meta name="lang:clipboard.copy" content="Copiar al portapapeles">
      
        <meta name="lang:clipboard.copied" content="Copiado al portapapeles">
      
        <meta name="lang:search.language" content="es">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No se encontraron documentos">
      
        <meta name="lang:search.result.one" content="1 documento encontrado">
      
        <meta name="lang:search.result.other" content="# documentos encontrados">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.2">
    
    
      
        <title>Instalación - Portal Andino</title>
      
    
    
	
      <link rel="stylesheet" href="../../assets/stylesheets/application.30686662.css">
      
      
    
	<link rel="stylesheet" href="../../css/extra.css">

    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    <script src="../../js/extra.js"></script>

    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../css/extra_rtd.css">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-91435482-1", "https://portal-andino.readthedocs.io/")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#instalacion" tabindex="1" class="md-skip">
        Saltar a contenido
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://datosgobar.github.io/portal-andino" title="Portal Andino" class="md-header-nav__button md-logo">
          
            <img src="../../images/logo.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Portal Andino
            </span>
            <span class="md-header-nav__topic">
              
                Instalación
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Escriba para comenzar la búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/datosgobar/portal-andino/" title="Ir al repositorio" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <!--
  Copyright (c) 2016-2018 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Main navigation -->
<nav class="md-nav md-nav--primary" data-md-level="0">

        <!-- Site title -->
        <label class="md-nav__title md-nav__title--site" for="__drawer">
          <a href="https://datosgobar.github.io/portal-andino"
              title="Portal Andino" class="md-nav__button md-logo">
            
              <img src="../../images/logo.svg" width="48" height="48" />
            
          </a>
          Portal Andino
        </label>
      
        <!-- Repository containing source -->
        
          <div class="md-nav__source">
            


  

<a href="https://github.com/datosgobar/portal-andino/" title="Ir al repositorio" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        
      
        <!-- Render item list -->
        <ul class="md-nav__list" data-md-scrollfix>
          
            
            
            


  <li class="md-nav__item">
    <a href="../.." title="Inicio" class="md-nav__link">
      Inicio
    </a>
  </li>

            <hr/>
          
            
            
            


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Usuarios
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Usuarios
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../quickstart/" title="Comenzar a usar Andino" class="md-nav__link">
      Comenzar a usar Andino
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../time-series/" title="Publicar series de tiempo" class="md-nav__link">
      Publicar series de tiempo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

            <hr/>
          
            
            
            

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Desarrolladores
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Desarrolladores
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Instalación
      </label>
    
    <a href="./" title="Instalación" class="md-nav__link md-nav__link--active">
      Instalación
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Contenidos de la sección</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#indice" class="md-nav__link">
    Indice
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependencias" class="md-nav__link">
    Dependencias
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instalacion-simplificada-de-andino" class="md-nav__link">
    Instalación simplificada de andino
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instalacion-avanzada-de-andino" class="md-nav__link">
    Instalación avanzada de andino
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#desinstalar-andino" class="md-nav__link">
    Desinstalar andino
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../update/" title="Actualización" class="md-nav__link">
      Actualización
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../checklist/" title="Recomendaciones para salir a producción" class="md-nav__link">
      Recomendaciones para salir a producción
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../migration/" title="Migracion" class="md-nav__link">
      Migracion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../maintenance/" title="Mantenimiento" class="md-nav__link">
      Mantenimiento
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../https/" title="Configuración HTTPS" class="md-nav__link">
      Configuración HTTPS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dns/" title="Configuración de DNS" class="md-nav__link">
      Configuración de DNS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker/" title="Generación de imágenes Docker" class="md-nav__link">
      Generación de imágenes Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../development/" title="Desarrollo" class="md-nav__link">
      Desarrollo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tests/" title="Tests" class="md-nav__link">
      Tests
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

            <hr/>
          
        </ul>
      </nav>
      
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Contenidos de la sección</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#indice" class="md-nav__link">
    Indice
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependencias" class="md-nav__link">
    Dependencias
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instalacion-simplificada-de-andino" class="md-nav__link">
    Instalación simplificada de andino
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instalacion-avanzada-de-andino" class="md-nav__link">
    Instalación avanzada de andino
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#desinstalar-andino" class="md-nav__link">
    Desinstalar andino
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/datosgobar/portal-andino/edit/master/docs/developers/install.md" title="Editar esta página" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="instalacion">Instalación</h1>
<p>Teniendo en cuenta la dificultad de implementación e incluso la cantidad de pasos para lograr un deploy existoso, 
existen dos formas de instalar esta distribución de <strong>CKAN</strong>.</p>
<ul>
<li>Si no tenés muchos conocimientos de CKAN, Docker o de administracién de servidores en general, es recomendable 
usar la instalación <strong><a href="#instalacion-simplificada-de-andino">simplificada  de Andino</a></strong>. 
Está pensada para que, en la menor cantidad de pasos y de manera sencilla, tengas un portal de datos funcionando. </li>
<li>Si ya conocés la plataforma, tenés experiencia con Docker o, simplemente, querés entender cómo funciona 
esta implementación, te sugiero que revises la <strong><a href="#instalacion-avanzada-de-andino">instalacion avanzada de Andino</a></strong></li>
</ul>
<!-- START doctoc generated TOC please keep comment here to allow auto update -->

<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

<h2 id="indice">Indice</h2>
<ul>
<li><a href="#dependencias">Dependencias</a></li>
<li><a href="#instalacion-simplificada-de-andino">Instalación simplificada de andino</a></li>
<li><a href="#instalacion-avanzada-de-andino">Instalación avanzada de andino</a></li>
<li><a href="#desinstalar-andino">Desinstalar andino</a></li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->

<h2 id="dependencias">Dependencias</h2>
<ul>
<li>DOCKER: <a href="https://docs.docker.com/engine/installation">Guía de instalación</a>.</li>
<li>Versión mínima <em>testeada</em>: <code>1.13.1</code></li>
<li>Docker Compose: <a href="https://docs.docker.com/compose/install/">Guía de instalación</a>.</li>
<li>Versión mínima <em>testeada</em>: <code>1.12.0</code></li>
</ul>
<h2 id="instalacion-simplificada-de-andino">Instalación simplificada de andino</h2>
<p>La idea detrás de esta implementación de CKAN es <strong>que sólo te encargues de tus datos</strong>, nada más. 
Por eso, si "copiás y pegás" el comando de consola, en sólo unos momentos, tendrás un Andino listo para usar.
Esta clase de instalación no requiere que clones el repositorio, ya que usamos contenedores alojados en 
<a href="https://hub.docker.com/r/datosgobar">DockerHub</a></p>
<ul>
<li>Ubuntu|Debian|RHEL|CentOS:</li>
<li>Instalación:</li>
</ul>
<p>Para la instalación, usamos un script de python llamado 
<a href="https://github.com/datosgobar/portal-andino/blob/master/install/install.py"><code>install.py</code></a>.
El mismo requiere algunos parámetros específicos, y existen otros que son opcionales:</p>
<div class="codehilite"><pre><span></span><span class="c1"># Parametros de install.py</span>
    <span class="o">[</span>-h<span class="o">]</span>                    Mostrar la ayuda del script
    --error_email           Email donde se mandaran los errores del portal de ser necesario
    --site_host             Dominio o IP del la aplicación *sin el protocolo*
    --database_user         Nombre del usuario de la base de datos a crear
    --database_password     Contraseña de la base de datos a crear
    --datastore_user        Nombre del usuario de la base de datos del datastore a crear
    --datastore_password    Contraseña de la base de datos del datastore a crear
    <span class="o">[</span>--nginx-extended-cache<span class="o">]</span>
        Configura nginx con una configuración extendida y configura el hook de
        invalidación de cache de Andino para notificar a nginx
    <span class="o">[</span>--nginx_ssl<span class="o">]</span>
        Aplica la configuración HTTPS en nginx. Requiere ambos archivos del certificado SSL para poder lograrlo<span class="p">;</span> en 
        caso contrario, se utilizará la configuración default
    <span class="o">[</span>--ssl_key_path SSL_KEY_PATH<span class="o">]</span>
        Path dentro del host donde está ubicado el archivo .key para el certificado SSL<span class="p">;</span> será copiado al contenedor 
        de nginx si tanto éste como el .crt pueden ser encontrados
    <span class="o">[</span>--ssl_crt_path SSL_CRT_PATH<span class="o">]</span>
        Path dentro del host donde está ubicado el archivo .crt para el certificado SSL<span class="p">;</span> será copiado al contenedor 
        de nginx si tanto éste como el .key pueden ser encontrados
    <span class="o">[</span>--nginx_port NGINX_PORT<span class="o">]</span>
        Puerto del servidor <span class="s2">&quot;Host&quot;</span> que se desea que se tome para recibir llamadas HTTP.
        Por defecto es el <span class="m">80</span>.
    <span class="o">[</span>--nginx_ssl_port NGINX_SSL_PORT<span class="o">]</span>
        Puerto del servidor <span class="s2">&quot;Host&quot;</span> que se desea que se tome para recibir llamadas HTTPS.
        Por defecto es el <span class="m">443</span>.
        Es importante para los administradores saber que Andino tomará el puerto especificado <span class="o">(</span>o el default<span class="o">)</span> ya sea que el portal use o no use HTTPS. En caso de no querer usar HTTPS y que el host tenga erl puerto <span class="m">443</span> tomado por un servidor web, es requisito especificar un puerto distinto <span class="o">(</span>ejemplo: <span class="m">8443</span><span class="o">)</span> que será reservado por Andino, pero no utilizado.
    <span class="o">[</span>--datastore_port DATASTORE_PORT<span class="o">]</span>
        Puerto del servidor <span class="s2">&quot;Host&quot;</span> que se desea que se tome para recibir llamadas HTTP al <span class="s2">&quot;datastore&quot;</span>.
        Por defecto es el <span class="m">8800</span>.
    <span class="o">[</span>--install_directory INSTALL_DIRECTORY<span class="o">]</span>
        Directorio donde se desea instalar la aplicación.
        Por defecto es <span class="sb">`</span>/etc/portal<span class="sb">`</span> <span class="o">(</span>recomendado<span class="o">)</span>
    <span class="o">[</span>--file_size_limit FILE_SIZE_LIMIT<span class="o">]</span>
        Configura el límite de tamaño para subida de archivos en recursos. 
</pre></div>


<p>Para esta instalación de ejemplo, usaremos estos parámetros para la aplicación.
Para los demás, usaremos los valores por defecto:</p>
<ul>
<li>Email donde se mandarán los errores. <code>EMAIL=admin@example.com</code></li>
<li>Dominio o IP de la aplicación <em>sin el protocolo</em>: <code>HOST=datos.gob.ar</code></li>
<li>Usuario de la base de datos: <code>DB_USER=&lt;my db user&gt;</code></li>
<li>Password de la base de datos: <code>DB_PASS=&lt;my db pass&gt;</code></li>
<li>Usuario del datastore: <code>STORE_USER=&lt;my datastore user&gt;</code></li>
<li>Password del datastore: <code>STORE_PASS=&lt;my datastore password&gt;</code></li>
</ul>
<p><em>Nota</em>: Si usamos una IP para la variable <code>HOST</code>, el envío de mails no funcionará.
Postfix require un "fully-qualified domain name (FQDN)". 
Ver <a href="http://www.postfix.org/postconf.5.html#myhostname">la documentación de Postfix</a> para más detalles.</p>
<p><em>Nota 2</em>: Si se utiliza el nombre 'localhost' para la variable <code>site_host</code>, es posible que ocurra un error al intentar 
subir un archivo perteneciente a un recurso al Datastore. Para evitar este problema, se debe utilizar un hostname 
diferente.</p>
<div class="codehilite"><pre><span></span><span class="c1"># Primero especificamos los valores necesarios</span>

<span class="nv">EMAIL</span><span class="o">=</span>admin@example.com
<span class="nv">HOST</span><span class="o">=</span>andino.midominio.com.ar
<span class="nv">DB_USER</span><span class="o">=</span>my_database_user
<span class="nv">DB_PASS</span><span class="o">=</span>my_database_pass
<span class="nv">STORE_USER</span><span class="o">=</span>my_data_user
<span class="nv">STORE_PASS</span><span class="o">=</span>my_data_pass

wget https://raw.github.com/datosgobar/portal-andino/master/install/<span class="o">{</span>install,installation_manager<span class="o">}</span>.py

sudo python ./install.py <span class="se">\</span>
    --error_email <span class="s2">&quot;</span><span class="nv">$EMAIL</span><span class="s2">&quot;</span> <span class="se">\</span>
    --site_host<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$HOST</span><span class="s2">&quot;</span> <span class="se">\</span>
    --database_user<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$DB_USER</span><span class="s2">&quot;</span> <span class="se">\</span>
    --database_password<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$DB_PASS</span><span class="s2">&quot;</span> <span class="se">\</span>
    --datastore_user<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$STORE_USER</span><span class="s2">&quot;</span> <span class="se">\</span>
    --datastore_password<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$STORE_PASS</span><span class="s2">&quot;</span>
</pre></div>


<h2 id="instalacion-avanzada-de-andino">Instalación avanzada de andino</h2>
<p>La instalación avanzada está pensada para usuarios que quieren ver cómo funciona internamente <code>Andino</code></p>
<p>Para instalar y ejecutar Andino, seguiremos estos pasos:</p>
<ul>
<li>Paso 1: Clonar repositorio.</li>
</ul>
<div class="codehilite"><pre><span></span>sudo mkdir /etc/portal
<span class="nb">cd</span> /etc/portal
sudo git clone https://github.com/datosgobar/portal-andino.git .
</pre></div>


<ul>
<li>Paso 2: Especificar las variables de entorno para el contenedor de postgresql.</li>
</ul>
<p>NOTA: Debemos usar un dominio válido para la variable <code>DOMINIO</code>, de otra forma el envio de mails no funcionará.
Postfix require un "fully-qualified domain name (FQDN)". 
Ver <a href="http://www.postfix.org/postconf.5.html#myhostname">la documentación de Postfix</a> para más detalles.</p>
<div class="codehilite"><pre><span></span><span class="nv">DB_USER</span><span class="o">=</span>&lt;my user&gt;
<span class="nv">DB_PASS</span><span class="o">=</span>&lt;my pass&gt;
<span class="nv">DOMINIO</span><span class="o">=</span>andino.midominio.com.ar
<span class="nv">ANDINO_VERSION</span><span class="o">=</span>&lt;version que deseamos instalar&gt;
sudo su -c <span class="s2">&quot;echo POSTGRES_USER=</span><span class="nv">$DB_USER</span><span class="s2"> &gt; .env&quot;</span>
sudo su -c <span class="s2">&quot;echo POSTGRES_PASSWORD=</span><span class="nv">$DB_PASS</span><span class="s2"> &gt;&gt; .env&quot;</span>
sudo su -c <span class="s2">&quot;echo NGINX_HOST_PORT=80 &gt;&gt; .env&quot;</span>
sudo su -c <span class="s2">&quot;echo DATASTORE_HOST_PORT=8800 &gt;&gt; .env&quot;</span>
sudo su -c <span class="s2">&quot;echo maildomain=</span><span class="nv">$DOMINIO</span><span class="s2"> &gt;&gt; .env&quot;</span>
sudo su -c <span class="s2">&quot;echo ANDINO_TAG=</span><span class="nv">$ANDINO_VERSION</span><span class="s2"> &gt;&gt; .env&quot;</span>
</pre></div>


<ul>
<li>Paso 3: Construir y lanzar los contenedor de servicios usando el archivo <strong>latest.yml</strong>: <code>docker-compose -f latest.yml up -d db postfix redis solr</code></li>
<li>Paso 4: Construir y lanzar el contenedor de <strong>andino</strong> usando el archivo <strong>latest.yml</strong>: <code>docker-compose -f latest.yml up -d portal</code></li>
<li>Paso 5: Inicializar la base de datos y la configuración de la aplicación:</li>
</ul>
<div class="codehilite"><pre><span></span><span class="nv">EMAIL</span><span class="o">=</span>admin@example.com
<span class="nv">HOST</span><span class="o">=</span>datos.gob.ar
<span class="nv">DB_USER</span><span class="o">=</span>&lt;my db user&gt;
<span class="nv">DB_PASS</span><span class="o">=</span>&lt;my db pass&gt;
<span class="nv">STORE_USER</span><span class="o">=</span>&lt;my datastore user&gt;
<span class="nv">STORE_PASS</span><span class="o">=</span>&lt;my datastore password&gt;
docker-compose -f latest.yml <span class="nb">exec</span> portal /etc/ckan_init.d/init.sh -e <span class="s2">&quot;</span><span class="nv">$EMAIL</span><span class="s2">&quot;</span> -h <span class="s2">&quot;</span><span class="nv">$HOST</span><span class="s2">&quot;</span> <span class="se">\</span>
        -p <span class="s2">&quot;</span><span class="nv">$DB_USER</span><span class="s2">&quot;</span> -P <span class="s2">&quot;</span><span class="nv">$DB_PASS</span><span class="s2">&quot;</span> <span class="se">\</span>
        -d <span class="s2">&quot;</span><span class="nv">$STORE_USER</span><span class="s2">&quot;</span> -D <span class="s2">&quot;</span><span class="nv">$STORE_PASS</span><span class="s2">&quot;</span>
</pre></div>


<ul>
<li>Paso 8: Construir el contenedor de <strong>nginx</strong> usando el archivo <strong>latest.yml</strong>: `docker-compose -f latest.yml up -d nginx</li>
</ul>
<h2 id="desinstalar-andino">Desinstalar andino</h2>
<p>Esta secuencia de comandos va a ELIMINAR TODOS LOS CONTENEDORES, IMÁGENES y VOLUMENES de la aplicación de la vm donde 
está instalada la plataforma.</p>
<p>Esta operación no es reversible. <strong>Perderás todos tus datos si realizas esta operación</strong>.</p>
<div class="codehilite"><pre><span></span><span class="nv">app_dir</span><span class="o">=</span><span class="s2">&quot;/etc/portal/&quot;</span>
<span class="nb">cd</span> <span class="nv">$app_dir</span>
docker-compose -f latest.yml down -v
<span class="nb">cd</span> ~/
sudo rm <span class="nv">$app_dir</span> -r
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../time-series/" title="Publicar series de tiempo" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Anterior
                </span>
                Publicar series de tiempo
              </span>
            </div>
          </a>
        
        
          <a href="../update/" title="Actualización" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Siguiente
                </span>
                Actualización
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.c648116f.js"></script>
      
        
        
          
          <script src="../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              
                <script src="../../assets/javascripts/lunr/lunr.es.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>